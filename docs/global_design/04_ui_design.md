# UI設計書

## 画面一覧

### 🔐 認証（Auth）

| **画面ID** | **パス** | **画面名** | **アクター** | **主な操作** |
|-----------|---------|----------|-------------|-------------|
| **AUTH-LOGIN** | /login | ログイン | Guest | 「Googleでログイン」→ 認証成功で /subscriptions へ |

### 📝 サブスク管理（Subscription）

| **画面ID** | **パス** | **画面名** | **アクター** | **主な操作** |
|-----------|---------|----------|-------------|-------------|
| **SUB-LIST** | /subscriptions | サブスク一覧 | User | 一覧表示、合計金額確認、新規登録へ遷移、編集へ遷移 |
| **SUB-NEW** | /subscriptions/new | サブスク登録 | User | 新規サブスク入力、保存、キャンセル |
| **SUB-EDIT** | /subscriptions/:id/edit | サブスク編集 | User | 既存サブスク編集、保存、削除、キャンセル |

### 💳 支払い方法管理（PaymentMethod）

| **画面ID** | **パス** | **画面名** | **アクター** | **主な操作** |
|-----------|---------|----------|-------------|-------------|
| **PAY-LIST** | /payment-methods | 支払い方法一覧 | User | 一覧表示、新規登録へ遷移、編集へ遷移 |
| **PAY-NEW** | /payment-methods/new | 支払い方法登録 | User | 新規支払い方法入力、保存、キャンセル |
| **PAY-EDIT** | /payment-methods/:id/edit | 支払い方法編集 | User | 既存支払い方法編集、保存、削除、キャンセル |

### ⚙️ 設定（Settings）

| **画面ID** | **パス** | **画面名** | **アクター** | **主な操作** |
|-----------|---------|----------|-------------|-------------|
| **SETTINGS** | /settings | 設定 | User | 退会 |

---

## グローバルナビゲーション

### ヘッダー構成（ログイン後）
```
┌─────────────────────────────────────────────────────────────┐
│  🎫 SubsQ          サブスク一覧 | 支払い方法 | 設定 | ログアウト │
└─────────────────────────────────────────────────────────────┘
```

| 要素 | 説明 |
|------|------|
| **ロゴ（左）** | クリックで /subscriptions へ遷移 |
| **サブスク一覧** | /subscriptions へ遷移 |
| **支払い方法** | /payment-methods へ遷移 |
| **設定** | /settings へ遷移 |
| **ログアウト** | ログアウト → /login へリダイレクト |

### ヘッダー構成（未ログイン）
```
┌─────────────────────────────────────────────────────────────┐
│  🎫 SubsQ                                                    │
└─────────────────────────────────────────────────────────────┘
```

※ ナビゲーション非表示、/login のみアクセス可能

---

## 画面設計詳細

### AUTH-LOGIN（ログイン）
```
┌─────────────────────────────────────────┐
│              🎫 SubsQ                   │
│                                         │
│    シンプルなサブスク管理アプリ           │
│                                         │
│      ┌─────────────────────────┐       │
│      │  🔵 Googleでログイン     │       │
│      └─────────────────────────┘       │
│                                         │
└─────────────────────────────────────────┘
```

| **区分** | **項目** | **説明** |
|---------|---------|----------|
| 表示 | サービスロゴ | 「SubsQ」ロゴ |
| 表示 | サブコピー | 「シンプルなサブスク管理アプリ」 |
| 操作 | **Googleでログイン** | OAuth認証。成功時 /subscriptions へリダイレクト |

---

### SUB-LIST（サブスク一覧）
```
┌─────────────────────────────────────────────────────────────┐
│  🎫 SubsQ          サブスク一覧 | 支払い方法 | 設定 | ログアウト │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  💰 月額合計: ¥5,000    📅 年額合計: ¥60,000         │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│                              ┌──────────────────────┐      │
│                              │  ＋ サブスクを登録    │      │
│                              └──────────────────────┘      │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  📺 Netflix                        ¥1,490 / 月額    │   │
│  │  次回請求日: 2025/02/15                              │   │
│  │  💳 楽天カード                                       │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  🎵 Spotify                        ¥980 / 月額      │   │
│  │  次回請求日: 2025/02/01                              │   │
│  │  💳 PayPal                                           │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  ☁️ iCloud+                        ¥3,900 / 年額    │   │
│  │  次回請求日: 2025/09/20                              │   │
│  │  💳 Apple ID                                         │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

| **区分** | **項目** | **説明** |
|---------|---------|----------|
| 表示 | **合計金額（固定）** | 月額換算・年額換算の合計。ページ上部に固定表示 |
| 表示 | **サブスクカード** | サービス名、金額、請求サイクル、次回請求日、支払い方法 |
| 操作 | **＋ サブスクを登録** | /subscriptions/new へ遷移 |
| 操作 | **カードクリック** | /subscriptions/:id/edit へ遷移 |

#### 空状態（サブスク0件）
```
┌─────────────────────────────────────────────────────────────┐
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  💰 月額合計: ¥0    📅 年額合計: ¥0                   │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│              サブスクがまだ登録されていません                 │
│                                                             │
│                 ┌──────────────────────┐                   │
│                 │  ＋ サブスクを登録    │                   │
│                 └──────────────────────┘                   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

### SUB-NEW（サブスク登録）
```
┌─────────────────────────────────────────────────────────────┐
│  🎫 SubsQ          サブスク一覧 | 支払い方法 | 設定 | ログアウト │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ← 戻る                                                     │
│                                                             │
│  サブスクを登録                                              │
│                                                             │
│  サービス名 *                                                │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  Netflix                                             │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  金額（円） *                                                │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  1490                                                │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  請求サイクル *                                              │
│  ┌─────────────┐  ┌─────────────┐                         │
│  │ ● 月額     │  │ ○ 年額     │                         │
│  └─────────────┘  └─────────────┘                         │
│                                                             │
│  基準日 *                                                    │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  2024/03/15                                    📅    │   │
│  └─────────────────────────────────────────────────────┘   │
│  ※ 初回支払日または次回請求日を入力してください               │
│                                                             │
│  支払い方法                                                  │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  楽天カード                                     ▼    │   │
│  └─────────────────────────────────────────────────────┘   │
│  ┌─────────────────────────┐                               │
│  │  ＋ 新しい支払い方法を追加  │                             │
│  └─────────────────────────┘                               │
│                                                             │
│  メモ                                                        │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  スタンダードプラン                                   │   │
│  │                                                       │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  ┌─────────────┐  ┌─────────────┐                         │
│  │  キャンセル  │  │    保存     │                         │
│  └─────────────┘  └─────────────┘                         │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

| **区分** | **項目** | **必須** | **説明** |
|---------|---------|---------|----------|
| 入力 | サービス名 | ✅ | テキスト入力 |
| 入力 | 金額 | ✅ | 数値入力（円） |
| 入力 | 請求サイクル | ✅ | ラジオボタン（月額 / 年額） |
| 入力 | 基準日 | ✅ | 日付ピッカー |
| 入力 | 支払い方法 | - | ドロップダウン（未選択可） |
| 入力 | メモ | - | テキストエリア |
| 操作 | **＋ 新しい支払い方法を追加** | - | /payment-methods/new へ遷移（またはモーダル表示） |
| 操作 | **キャンセル** | - | /subscriptions へ戻る |
| 操作 | **保存** | - | 登録完了 → /subscriptions へ遷移 |

---

### SUB-EDIT（サブスク編集）
```
┌─────────────────────────────────────────────────────────────┐
│  🎫 SubsQ          サブスク一覧 | 支払い方法 | 設定 | ログアウト │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ← 戻る                                                     │
│                                                             │
│  サブスクを編集                                              │
│                                                             │
│  （SUB-NEW と同じ入力フォーム）                              │
│                                                             │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐        │
│  │    削除     │  │  キャンセル  │  │    保存     │        │
│  └─────────────┘  └─────────────┘  └─────────────┘        │
│      🔴                                   🔵                │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

| **区分** | **項目** | **説明** |
|---------|---------|----------|
| 入力 | 全項目 | SUB-NEW と同じ（既存データを初期表示） |
| 操作 | **削除** | 確認ダイアログ表示 → 削除 → /subscriptions へ |
| 操作 | **キャンセル** | /subscriptions へ戻る |
| 操作 | **保存** | 更新完了 → /subscriptions へ遷移 |

#### 削除確認ダイアログ
```
┌─────────────────────────────────────┐
│                                     │
│  このサブスクを削除しますか？        │
│                                     │
│  「Netflix」を削除すると             │
│  元に戻せません。                    │
│                                     │
│  ┌───────────┐  ┌───────────┐      │
│  │ キャンセル │  │   削除    │      │
│  └───────────┘  └───────────┘      │
│                       🔴            │
└─────────────────────────────────────┘
```

---

### PAY-LIST（支払い方法一覧）
```
┌─────────────────────────────────────────────────────────────┐
│  🎫 SubsQ          サブスク一覧 | 支払い方法 | 設定 | ログアウト │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  支払い方法                                                  │
│                                                             │
│                              ┌──────────────────────┐      │
│                              │  ＋ 支払い方法を追加  │      │
│                              └──────────────────────┘      │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  💳 楽天カード                          使用中: 3件  │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  💳 PayPal                              使用中: 1件  │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  💳 Apple ID                            使用中: 2件  │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

| **区分** | **項目** | **説明** |
|---------|---------|----------|
| 表示 | 支払い方法名 | 登録済みの支払い方法 |
| 表示 | 使用中件数 | この支払い方法を使用しているサブスク数 |
| 操作 | **＋ 支払い方法を追加** | /payment-methods/new へ遷移 |
| 操作 | **行クリック** | /payment-methods/:id/edit へ遷移 |

---

### PAY-NEW（支払い方法登録）
```
┌─────────────────────────────────────────────────────────────┐
│  🎫 SubsQ          サブスク一覧 | 支払い方法 | 設定 | ログアウト │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ← 戻る                                                     │
│                                                             │
│  支払い方法を追加                                            │
│                                                             │
│  支払い方法名 *                                              │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  楽天カード                                          │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  ┌─────────────┐  ┌─────────────┐                         │
│  │  キャンセル  │  │    保存     │                         │
│  └─────────────┘  └─────────────┘                         │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

| **区分** | **項目** | **必須** | **説明** |
|---------|---------|---------|----------|
| 入力 | 支払い方法名 | ✅ | テキスト入力 |
| 操作 | **キャンセル** | - | /payment-methods へ戻る |
| 操作 | **保存** | - | 登録完了 → /payment-methods へ遷移 |

---

### PAY-EDIT（支払い方法編集）
```
┌─────────────────────────────────────────────────────────────┐
│  🎫 SubsQ          サブスク一覧 | 支払い方法 | 設定 | ログアウト │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ← 戻る                                                     │
│                                                             │
│  支払い方法を編集                                            │
│                                                             │
│  支払い方法名 *                                              │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  楽天カード                                          │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐        │
│  │    削除     │  │  キャンセル  │  │    保存     │        │
│  └─────────────┘  └─────────────┘  └─────────────┘        │
│      🔴                                   🔵                │
│                                                             │
│  ⚠️ この支払い方法は3件のサブスクで使用中のため削除できません │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

| **区分** | **項目** | **説明** |
|---------|---------|----------|
| 入力 | 支払い方法名 | テキスト入力（既存データを初期表示） |
| 表示 | 使用中警告 | 使用中の場合、削除不可の旨を表示 |
| 操作 | **削除** | 使用中: disabled（非活性）/ 未使用: 確認ダイアログ → 削除 |
| 操作 | **キャンセル** | /payment-methods へ戻る |
| 操作 | **保存** | 更新完了 → /payment-methods へ遷移 |

---

### SETTINGS（設定）
```
┌─────────────────────────────────────────────────────────────┐
│  🎫 SubsQ          サブスク一覧 | 支払い方法 | 設定 | ログアウト │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  設定                                                        │
│                                                             │
│  ─────────────────────────────────────────────────────────  │
│                                                             │
│  アカウント                                                  │
│                                                             │
│  メールアドレス: example@gmail.com                           │
│                                                             │
│  ─────────────────────────────────────────────────────────  │
│                                                             │
│  ⚠️ 危険な操作                                               │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  🔴 退会する                                         │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  退会すると、すべてのデータが削除され、元に戻せません。        │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

| **区分** | **項目** | **説明** |
|---------|---------|----------|
| 表示 | メールアドレス | ログイン中のGoogleアカウント |
| 操作 | **退会する** | 確認ダイアログ → 退会処理 → /login へ遷移 |

#### 退会確認ダイアログ
```
┌─────────────────────────────────────┐
│                                     │
│  本当に退会しますか？                │
│                                     │
│  すべてのサブスクと支払い方法が      │
│  削除され、元に戻せません。          │
│                                     │
│  ┌───────────┐  ┌───────────┐      │
│  │ キャンセル │  │   退会    │      │
│  └───────────┘  └───────────┘      │
│                       🔴            │
└─────────────────────────────────────┘
```

---

## 画面遷移図
```
[Guest]
    │
    └─→ /login ─────────────────────────────────────┐
            │                                        │
            │ Googleログイン成功                      │
            ▼                                        │
[User] /subscriptions（サブスク一覧）◄────────────────┘
            │
            ├─→ /subscriptions/new（登録）
            │       └─→ /payment-methods/new（インライン追加）
            │
            ├─→ /subscriptions/:id/edit（編集・削除）
            │
            ├─→ /payment-methods（支払い方法一覧）
            │       ├─→ /payment-methods/new（追加）
            │       └─→ /payment-methods/:id/edit（編集・削除）
            │
            ├─→ /settings（設定・退会）
            │       └─→ 退会 → /login
            │
            └─→ ログアウト → /login
```

---

## エラー画面

| **パス** | **画面名** | **説明** |
|---------|----------|----------|
| /404 | Not Found | 存在しないページにアクセスした場合 |
```
┌─────────────────────────────────────┐
│                                     │
│         404 - ページが見つかりません │
│                                     │
│  お探しのページは存在しないか、       │
│  移動した可能性があります。           │
│                                     │
│         ┌───────────────┐          │
│         │  ホームに戻る  │          │
│         └───────────────┘          │
│                                     │
└─────────────────────────────────────┘
```